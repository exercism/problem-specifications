{
   "exercise":"zipper",
   "version":"2.0.0",
   "comments":[
      " Verifies that a tree can be build from recursive applications of   ",
      " one of the following atomic operations:                            ",
      "    - cursor moving: left, right, up                                ",
      "    - node insertion/modification and reading                       ",
      "                                                                    ",
      " A zipper binary tree, is a binary tree with a cursor placed on any ",
      " of its nodes.                                                      ",
      "                                                                    ",
      " Any zipper tree construction always start from an empty zipper:    ",
      "     - an empty tree (not even a root node).                        ",
      "     - a cursor on the place where a root node coulb be inserted.   ",
      "                                                                    ",
      " The first part of the test consists in building a unique tree,     ",
      " checking at each steps that:                                       ",
      "     - values inside the tree are correct,                          ",
      "     - and all operation are non mutating                           ",
      "     (reading is by definition non mutating, therefore we wont      ",
      "      test this operation)                                          ",
      "                                                                    ",
      " The second part of the test for un-authorized moves operations,    ",
      " like inserting on non-empty spots, or going in a direction where   ",
      " cursor is not allowed to go (eg., up from the root)                ",
      "                                                                    ",
      " Lets consider the following affectation:                           ",
      "                    y <- f(x, value)                                ",
      " The following notation will be used to represent this operation:   ",
      "  {                                                                 ",
      "     'operation': 'f',                                              ",
      "     'affectTo': 'y',                                               ",
      "     'applyOn': 'x',                                                ",
      "     'item': 'value'                                                ",
      "  }                                                                 ",
      "                                                                    ",
      " Each test should start with the initialisation of an empty zipper  ",
      " named 'zipper':                                                    ",
      "  'initialZipper': {                                                ",
      "      'name': 'zipper'                                              ",
      "   }                                                                ",
      "                                                                    "
   ],
   "cases":[
      {
         "description":"Zipper is empty.",
         "property":"zipper",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[

            ]
         },
         "expected":{
            "error":"There is no value here, but you can insert a node here."
         }
      },
      {
         "description":"Insert method shouldn't mutate the object.",
         "property":"insert",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":null,
                  "applyOn":"zipper",
                  "item":1
               }
            ]
         },
         "expected":{
            "error":"There is no value here, but you can insert a node here."
         }
      },
      {
         "description":"Insert method actually set the right value at the right place.",
         "property":"getValue",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"value",
                  "affectTo":"actual"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":1
         }
      },
      {
         "description":"Left move and an empty spot insertion.",
         "property":"left",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"left",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":2
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":2
         }
      },
      {
         "description":"Right move and an empty spot insertion.",
         "property":"right",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"right",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":3
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":3
         }
      },
      {
         "description":"Left move do not mutate initialZipper.",
         "property":"left",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"left",
                  "affectTo":"tmp",
                  "applyOn":"zipper"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":1
         }
      },
      {
         "description":"Right move do not mutate initialZipper.",
         "property":"right",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"right",
                  "affectTo":"tmp",
                  "applyOn":"zipper"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":1
         }
      },
      {
         "description":"Going left then up is equivalent to staying put.",
         "property":"left",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"left",
                  "affectTo":"tmp",
                  "applyOn":"zipper"
               },
               {
                  "operation":"up",
                  "affectTo":"tmp",
                  "applyOn":"tmp"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"tmp"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":1
         }
      },
      {
         "description":"Going right then up is equivalent to staying put.",
         "property":"right",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":2
               },
               {
                  "operation":"right",
                  "affectTo":"tmp",
                  "applyOn":"zipper"
               },
               {
                  "operation":"up",
                  "affectTo":"tmp",
                  "applyOn":"tmp"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"tmp"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":2
         }
      },
      {
         "description":"Moving up do not mutate initialZipper.",
         "property":"up",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"left",
                  "affectTo":"tmp",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":2
               },
               {
                  "operation":"up",
                  "affectTo":null,
                  "applyOn":"zipper"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":2
         }
      },
      {
         "description":"Seting value (modifying an existing node)",
         "property":"setValue",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"right",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":3
               },
               {
                  "operation":"up",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"left",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":2
               },
               {
                  "operation":"value",
                  "affectTo":"z_value",
                  "applyOn":"zipper"
               },
               {
                  "operation":"multiply",
                  "affectTo":"tmp",
                  "applyOn":[
                     "z_value",
                     2
                  ]
               },
               {
                  "operation":"setValue",
                  "affectTo":"tmp",
                  "applyOn":"zipper",
                  "item":"tmp"
               },
               {
                  "operation":"floorDivide",
                  "affectTo":"actual",
                  "applyOn":[
                     "tmp",
                     "z_value"
                  ]
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":2
         }
      },
      {
         "description":"Setting value do not mutate initialZipper.",
         "property":"setValue",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":4
               },
               {
                  "operation":"setValue",
                  "affectTo":null,
                  "applyOn":"zipper",
                  "item":8
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":4
         }
      },
      {
         "description":"Going back to root shortcut.",
         "property":"root",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"right",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":3
               },
               {
                  "operation":"left",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":5
               },
               {
                  "operation":"root",
                  "affectTo":"tmp",
                  "applyOn":"zipper"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"tmp"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":1
         }
      },
      {
         "description":"Going back to root shortcut.",
         "property":"root",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"right",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":3
               },
               {
                  "operation":"left",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":5
               },
               {
                  "operation":"root",
                  "affectTo": null,
                  "applyOn":"zipper"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":5
         }
      },
      {
         "description":"Inserting a zipper.",
         "property":"insertZipper",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"right",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":3
               },
               {
                  "operation":"left",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               },
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":5
               },
               {
                  "operation":"createEmptyZipper",
                  "affectTo": "newZipper"
               },
               {
                  "operation":"insertZipper",
                  "affectTo": "newZipper",
                  "applyOn":"newZipper",
                  "item":"zipper"
               },
               {
                  "operation":"right",
                  "affectTo": "newZipper",
                  "applyOn":"newZipper"
               },
               {
                  "operation":"value",
                  "affectTo":"actual",
                  "applyOn":"newZipper"
               }
            ]
         },
         "expected":{
            "type":"int",
            "value":3
         }
      },
      {
         "description":"Can't go left from empty location",
         "property":"left",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"left",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "error":"Moving left is not allowed from this location."
         }
      },
      {
         "description":"Can't go right from empty location",
         "property":"right",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"right",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "error":"Moving right is not allowed from this location."
         }
      },
      {
         "description":"Can't go top from root",
         "property":"top",
         "input":{
            "initialZipper":{
               "name":"zipper"
            },
            "operations":[
               {
                  "operation":"insert",
                  "affectTo":"zipper",
                  "applyOn":"zipper",
                  "item":1
               },
               {
                  "operation":"top",
                  "affectTo":"zipper",
                  "applyOn":"zipper"
               }
            ]
         },
         "expected":{
            "error":"There's nothing up here (current location is the root)."
         }
      }
   ]
}
